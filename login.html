<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录系统</title>
    <!-- Tailwind CSS -->
    <script src="/myspellpal/js/jquery-3.7.1.min.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#8B5CF6',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-gradient-custom {
                background: linear-gradient(135deg, #4F46E5 0%, #8B5CF6 100%);
            }
            .shadow-custom {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none;
            }
            .transition-all-300 {
                transition: all 300ms ease-in-out;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-dark flex items-center justify-center p-4">
    <!-- 登录卡片容器 -->
    <div class="w-full max-w-md">
        <!-- 登录卡片 -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-custom overflow-hidden transition-all-300 transform hover:translate-y-[-5px]">
            <!-- 顶部渐变装饰条 -->
            <div class="h-2 bg-gradient-custom"></div>
            
            <!-- 登录表单 -->
            <div class="p-8">
                <!-- 登录标题 -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4">
                        <i class="fa fa-user-circle text-3xl text-primary"></i>
                    </div>
                    <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark dark:text-white">欢迎回来</h1>
                    <p class="text-gray-500 dark:text-gray-400 mt-2">请输入您的账号信息登录</p>
                </div>
                
                <!-- 表单 -->
                <form id="loginForm" class="space-y-4">
                    <!-- 用户名输入框 -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                            <i class="fa fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="username" 
                            class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 
                                   bg-gray-50 dark:bg-gray-900 dark:text-white placeholder-gray-400
                                   transition-all-300 input-focus" 
                            placeholder="用户名" required>
                    </div>
                    
                    <!-- 密码输入框 -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                            <i class="fa fa-lock text-gray-400"></i>
                        </div>
                        <input type="password" id="password" 
                            class="w-full pl-10 pr-10 py-3 rounded-lg border border-gray-300 dark:border-gray-700 
                                   bg-gray-50 dark:bg-gray-900 dark:text-white placeholder-gray-400
                                   transition-all-300 input-focus" 
                            placeholder="密码" required>
                        <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-primary transition-colors">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                    
                    <!-- 记住我和忘记密码 -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input id="remember-me" type="checkbox" 
                                class="w-4 h-4 text-primary bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-primary/50 transition-all-300">
                            <label for="remember-me" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
                                记住我
                            </label>
                        </div>
                        <a href="#" id="forgotPasswordLink" class="text-sm font-medium text-primary hover:text-secondary transition-colors">
                            忘记密码？
                        </a>
                    </div>
                    
                    <!-- 登录按钮 -->
                    <button type="submit" 
                        class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-lg 
                               transition-all-300 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center">
                        <i class="fa fa-sign-in mr-2"></i> 登录
                    </button>
                </form>
                

                
                <!-- 注册链接 -->
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600 dark:text-gray-400">
                        还没有账号？ 
                        <a href="#" id="registerLink" class="font-medium text-primary hover:text-secondary transition-colors">
                            立即注册
                        </a>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- 页脚 -->
        <div class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
            <p></p>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        // 密码显示/隐藏功能
        const togglePassword = document.getElementById('togglePassword');
        const password = document.getElementById('password');
        
        togglePassword.addEventListener('click', function() {
            // 切换密码类型
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);
            
            // 切换图标
            this.querySelector('i').classList.toggle('fa-eye');
            this.querySelector('i').classList.toggle('fa-eye-slash');
        });
        
        // 表单提交处理
        const loginForm = document.getElementById('loginForm');
        
        loginForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // 简单的表单验证
            if (!username || !password) {
                alert('请输入用户名和密码');
                return;
            }
            
            // 获取注册用户列表
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
            
            // 预设的测试账号（实际应用中应该连接后端验证）
            const validAccounts = [
                { username: 'test', password: '123456' },
                { username: 'admin', password: 'admin123' },
                ...registeredUsers // 合并注册的用户
            ];
            
            // 检查账号密码是否正确
            const isValidLogin = validAccounts.some(account => 
                account.username === username && account.password === password
            );
            
            // 显示提交动画效果
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fa fa-circle-o-notch fa-spin mr-2"></i> 登录中...';
            
            // 模拟登录请求
            setTimeout(() => {
                if (isValidLogin) {
                    // 登录成功
                    submitButton.innerHTML = '<i class="fa fa-check mr-2"></i> 登录成功';
                    submitButton.classList.remove('bg-primary', 'hover:bg-primary/90');
                    submitButton.classList.add('bg-green-500', 'hover:bg-green-600');
                    
                    // 检查是否需要记住用户
                    const rememberMe = document.getElementById('remember-me').checked;
                    if (rememberMe) {
                        // 保存用户名和密码到localStorage
                        localStorage.setItem('rememberedUsername', username);
                        localStorage.setItem('rememberedPassword', password);
                    } else {
                        // 清除可能存在的保存
                        localStorage.removeItem('rememberedUsername');
                        localStorage.removeItem('rememberedPassword');
                    }
                    
                    // 保存当前登录用户信息
                    localStorage.setItem('currentUser', username);
                    
                    // 登录成功后跳转到主页
                    setTimeout(() => {
                        // 跳转到单词记忆系统主页
                        window.location.href = 'word-memorization.html';
                    }, 1000);
                } else {
                    // 登录失败
                    submitButton.innerHTML = '<i class="fa fa-times mr-2"></i> 登录失败';
                    submitButton.classList.remove('bg-primary', 'hover:bg-primary/90');
                    submitButton.classList.add('bg-red-500', 'hover:bg-red-600');
                    
                    // 重置按钮
                    setTimeout(() => {
                        submitButton.disabled = false;
                        submitButton.innerHTML = originalText;
                        submitButton.classList.remove('bg-red-500', 'hover:bg-red-600');
                        submitButton.classList.add('bg-primary', 'hover:bg-primary/90');
                    }, 1000);
                }
            }, 1500);
        });
        
        // 输入框聚焦时的额外动效
        const inputs = document.querySelectorAll('input');
        
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('scale-[1.02]');
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('scale-[1.02]');
            });
        });
        
        // 支持深色模式检测
        function checkDarkMode() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
        }
        
        // 初始化检查深色模式
        checkDarkMode();
        
        // 监听深色模式变化
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', checkDarkMode);
        
        // 注册链接点击事件处理
        const registerLink = document.getElementById('registerLink');
        
        registerLink.addEventListener('click', function(event) {
            event.preventDefault(); // 阻止默认跳转行为
            
            // 跳转到注册页面
            window.location.href = 'register.html';
        });
        
        // 页面加载时检查是否有记住的用户名和密码
        document.addEventListener('DOMContentLoaded', function() {
            const rememberedUsername = localStorage.getItem('rememberedUsername');
            const rememberedPassword = localStorage.getItem('rememberedPassword');
            if (rememberedUsername) {
                // 填充用户名输入框
                document.getElementById('username').value = rememberedUsername;
                // 填充密码输入框
                if (rememberedPassword) {
                    document.getElementById('password').value = rememberedPassword;
                }
                // 选中记住我复选框
                document.getElementById('remember-me').checked = true;
            }
        });
        
        // 忘记密码功能
        const forgotPasswordLink = document.getElementById('forgotPasswordLink');
        
        forgotPasswordLink.addEventListener('click', function(event) {
            event.preventDefault(); // 阻止默认跳转行为
            
            // 跳转到忘记密码页面
            window.location.href = 'forgot-password.html';
        });
    </script>
</body>
</html>